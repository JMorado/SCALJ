Metadata-Version: 2.4
Name: scalj
Version: 0.1.0
Summary: A package for fitting Lennard-Jones parameters via volume-scaled condensed-phase simulations.
Author: SCALJ Contributors
License: MIT
Project-URL: Homepage, https://github.com/yourusername/scalj
Project-URL: Repository, https://github.com/yourusername/scalj
Keywords: molecular dynamics,machine learning,force field,MACE,Lennard-Jones
Classifier: Development Status :: 3 - Alpha
Classifier: Intended Audience :: Science/Research
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Scientific/Engineering :: Chemistry
Classifier: Topic :: Scientific/Engineering :: Physics
Requires-Python: >=3.12
Description-Content-Type: text/markdown
Requires-Dist: torch>=2.0.0
Requires-Dist: numpy>=1.20.0
Requires-Dist: pydantic>=1.9.0
Requires-Dist: tqdm>=4.60.0
Requires-Dist: pyyaml>=6.0
Requires-Dist: openmm>=8.0.0
Requires-Dist: openff-toolkit>=0.14.0
Requires-Dist: smee>=0.1.0
Requires-Dist: datasets>=2.0.0
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: black>=22.0.0; extra == "dev"
Requires-Dist: isort>=5.10.0; extra == "dev"
Requires-Dist: mypy>=0.950; extra == "dev"

# SCALJ - MACE-LJ Parameter Fitting

A modular Python package for fitting Lennard-Jones parameters to MACE ML potential energies and forces using molecular dynamics simulations.

## Features

- üî¨ **Molecular Dynamics Simulations** - Run MD simulations with OpenMM
- üìê **Configuration Scaling** - Generate scaled molecular configurations across different distance ranges
- ü§ñ **ML Potential Integration** - Compute energies and forces using MACE models
- üéØ **Parameter Optimization** - Fit Lennard-Jones parameters to match ML potential predictions
- ‚öôÔ∏è **Flexible Configuration** - YAML-based configuration with command-line overrides
- üñ•Ô∏è **CLI Interface** - Easy-to-use command-line interface

## Installation

### From Source (Development Mode)

```bash
cd /path/to/SCALJ
pip install -e .
```

### From PyPI (when published)

```bash
pip install scalj
```

### Dependencies

SCALJ requires the following packages:
- PyTorch (‚â•2.0.0)
- OpenMM (‚â•8.0.0)
- OpenFF Toolkit (‚â•0.14.0)
- SMEE
- Descent-FF
- Pydantic
- PyYAML
- NumPy
- Datasets
- tqdm

## Quick Start

### 1. Generate Example Configuration

```bash
scalj config --output config.yaml
```

This creates a `config.yaml` file with all available options and their default values.

### 2. Edit Configuration

Edit `config.yaml` to customize your workflow:

```yaml
system:
  smiles: '[C:1]([H:3])([H:4])([H:5])[O:2][H:6]'  # Methanol
  n_molecules: 323
  force_field_name: 'de-force-1.0.3.offxml'
  ml_potential_name: 'mace-off24-medium'
  output_dir: 'output'

training:
  learning_rate: 0.01
  n_epochs: 100
  device: 'cuda'
```

### 3. Run Workflow

```bash
scalj run --config config.yaml
```

## Usage

### CLI Commands

#### `scalj run` - Run the workflow

Run the complete MACE-LJ parameter fitting workflow:

```bash
# With configuration file
scalj run --config config.yaml

# With command-line overrides
scalj run --config config.yaml --n-epochs 200 --device cpu

# Without configuration file (uses defaults)
scalj run --smiles "[C:1]([H:2])([H:3])([H:4])[H:5]" --n-molecules 100
```

**Options:**
- `--config, -c` - Path to YAML configuration file
- `--smiles` - Indexed SMILES string for the molecule
- `--n-molecules` - Number of molecules in the system
- `--force-field` - Force field file name
- `--ml-potential` - ML potential model name
- `--trajectory` - Path to existing trajectory (skip simulation)
- `--output-dir` - Output directory for results
- `--learning-rate` - Learning rate for optimization
- `--n-epochs` - Number of training epochs
- `--device` - Device for training (`cuda` or `cpu`)

#### `scalj config` - Generate configuration

Generate an example configuration file:

```bash
scalj config --output my_config.yaml
```

**Options:**
- `--output, -o` - Output path for configuration file (default: `config.yaml`)

## Configuration

See `examples/config.yaml` for a fully documented example configuration file.

## Workflow Overview

The SCALJ workflow consists of four main steps:

1. **Molecular Dynamics Simulation** (or load existing trajectory)
   - Energy minimization
   - NVT equilibration
   - NPT equilibration
   - Production MD

2. **Configuration Scaling**
   - Generate scaled configurations across distance ranges
   - Subsample trajectory frames
   - Create training dataset

3. **ML Potential Evaluation**
   - Compute energies using MACE model
   - Compute forces via automatic differentiation

4. **Parameter Training**
   - Optimize Lennard-Jones parameters
   - Match ML potential energies and forces
   - Save optimized parameters

## Python API

You can also use SCALJ as a Python library:

```python
from scalj import config, simulation, scaling, training

# Create configurations
system_config = config.SystemConfig(
    smiles='[C:1]([H:3])([H:4])([H:5])[O:2][H:6]',
    n_molecules=323,
)
training_config = config.TrainingConfig(
    learning_rate=0.01,
    n_epochs=100,
)

# Run workflow steps
# ... (use individual modules)
```

## Development

### Running Tests

```bash
pip install -e ".[dev]"
pytest
```

### Code Formatting

```bash
black .
isort .
```

## License

MIT License

## Citation

If you use SCALJ in your research, please cite:

```bibtex
@software{scalj,
  title = {SCALJ: MACE-LJ Parameter Fitting},
  author = {SCALJ Contributors},
  year = {2026},
  url = {https://github.com/yourusername/scalj}
}
```

## Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

## Support

For questions and issues, please open an issue on GitHub.
